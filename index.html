<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Police Officer Case Matching System</title>
<link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;500;600;700&family=Share+Tech+Mono&family=Barlow:wght@300;400;500;600&display=swap" rel="stylesheet"/>
<style>
  :root {
    --bg:        #060910;
    --surface:   #0d1117;
    --border:    #1c2a3a;
    --accent:    #00e5ff;
    --accent2:   #ff6b35;
    --warn:      #ffcc00;
    --green:     #00ff88;
    --red:       #ff3355;
    --text:      #c8d8e8;
    --muted:     #4a6070;
    --glow:      0 0 20px rgba(0,229,255,0.25);
  }

  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'Barlow', sans-serif;
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* ‚îÄ‚îÄ SCANLINE OVERLAY ‚îÄ‚îÄ */
  body::before {
    content: '';
    position: fixed; inset: 0;
    background: repeating-linear-gradient(
      0deg,
      transparent,
      transparent 2px,
      rgba(0,0,0,0.08) 2px,
      rgba(0,0,0,0.08) 4px
    );
    pointer-events: none;
    z-index: 9999;
  }

  /* ‚îÄ‚îÄ GRID BG ‚îÄ‚îÄ */
  body::after {
    content: '';
    position: fixed; inset: 0;
    background-image:
      linear-gradient(rgba(0,229,255,0.03) 1px, transparent 1px),
      linear-gradient(90deg, rgba(0,229,255,0.03) 1px, transparent 1px);
    background-size: 40px 40px;
    pointer-events: none;
    z-index: 0;
  }

  /* ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ */
  header {
    position: relative; z-index: 10;
    border-bottom: 1px solid var(--border);
    background: linear-gradient(180deg, rgba(0,229,255,0.04) 0%, transparent 100%);
    padding: 0 2rem;
  }

  .header-inner {
    max-width: 1300px;
    margin: 0 auto;
    display: flex;
    align-items: center;
    justify-content: space-between;
    height: 70px;
  }

  .logo {
    display: flex; align-items: center; gap: 14px;
  }

  .logo-icon {
    width: 42px; height: 42px;
    background: var(--accent);
    clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
    display: flex; align-items: center; justify-content: center;
    font-size: 18px;
    color: var(--bg);
    animation: pulse-glow 3s ease-in-out infinite;
  }

  @keyframes pulse-glow {
    0%, 100% { box-shadow: 0 0 10px rgba(0,229,255,0.4); }
    50%       { box-shadow: 0 0 30px rgba(0,229,255,0.8); }
  }

  .logo-text {
    font-family: 'Rajdhani', sans-serif;
    font-weight: 700;
    font-size: 1.3rem;
    letter-spacing: 0.12em;
    color: #fff;
  }

  .logo-text span { color: var(--accent); }

  .status-bar {
    display: flex; gap: 20px; align-items: center;
  }

  .status-dot {
    display: flex; align-items: center; gap: 6px;
    font-family: 'Share Tech Mono', monospace;
    font-size: 0.72rem;
    color: var(--muted);
  }

  .dot {
    width: 7px; height: 7px; border-radius: 50%;
    background: var(--green);
    animation: blink 1.4s ease-in-out infinite;
  }

  @keyframes blink {
    0%, 100% { opacity: 1; }
    50%       { opacity: 0.2; }
  }

  /* ‚îÄ‚îÄ MAIN LAYOUT ‚îÄ‚îÄ */
  .wrapper {
    position: relative; z-index: 1;
    max-width: 1300px;
    margin: 0 auto;
    padding: 2.5rem 2rem;
    display: grid;
    grid-template-columns: 380px 1fr;
    gap: 2rem;
    align-items: start;
  }

  /* ‚îÄ‚îÄ PANEL BASE ‚îÄ‚îÄ */
  .panel {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 4px;
    overflow: hidden;
    position: relative;
  }

  .panel::before {
    content: '';
    position: absolute; top: 0; left: 0; right: 0;
    height: 2px;
    background: linear-gradient(90deg, transparent, var(--accent), transparent);
    opacity: 0.6;
  }

  .panel-header {
    padding: 1rem 1.4rem;
    border-bottom: 1px solid var(--border);
    display: flex; align-items: center; gap: 10px;
    background: rgba(0,229,255,0.02);
  }

  .panel-header h2 {
    font-family: 'Rajdhani', sans-serif;
    font-weight: 600;
    font-size: 0.9rem;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: var(--accent);
  }

  .panel-icon { font-size: 1rem; }

  /* ‚îÄ‚îÄ FORM ‚îÄ‚îÄ */
  .form-body { padding: 1.4rem; display: flex; flex-direction: column; gap: 1.2rem; }

  .field { display: flex; flex-direction: column; gap: 6px; }

  .field label {
    font-family: 'Share Tech Mono', monospace;
    font-size: 0.7rem;
    letter-spacing: 0.12em;
    color: var(--muted);
    text-transform: uppercase;
  }

  .field select,
  .field input {
    background: var(--bg);
    border: 1px solid var(--border);
    border-radius: 3px;
    color: var(--text);
    font-family: 'Barlow', sans-serif;
    font-size: 0.95rem;
    padding: 0.6rem 0.9rem;
    outline: none;
    transition: border-color 0.2s, box-shadow 0.2s;
    width: 100%;
    -webkit-appearance: none;
    appearance: none;
  }

  .select-wrap {
    position: relative;
  }

  .select-wrap::after {
    content: '‚ñæ';
    position: absolute; right: 12px; top: 50%; transform: translateY(-50%);
    color: var(--accent);
    pointer-events: none;
    font-size: 0.8rem;
  }

  .field select:focus,
  .field input:focus {
    border-color: var(--accent);
    box-shadow: var(--glow);
  }

  .field select option { background: #0d1117; }

  /* priority badges */
  .priority-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 8px;
  }

  .priority-btn {
    background: var(--bg);
    border: 1px solid var(--border);
    border-radius: 3px;
    color: var(--muted);
    font-family: 'Rajdhani', sans-serif;
    font-size: 0.85rem;
    font-weight: 600;
    letter-spacing: 0.1em;
    padding: 0.55rem;
    cursor: pointer;
    text-align: center;
    transition: all 0.18s;
    text-transform: uppercase;
  }

  .priority-btn:hover { border-color: var(--accent); color: var(--accent); }

  .priority-btn.active.low      { border-color: var(--green);  color: var(--green);  background: rgba(0,255,136,0.07); }
  .priority-btn.active.medium   { border-color: var(--warn);   color: var(--warn);   background: rgba(255,204,0,0.07); }
  .priority-btn.active.high     { border-color: var(--accent2);color: var(--accent2);background: rgba(255,107,53,0.07); }
  .priority-btn.active.critical { border-color: var(--red);    color: var(--red);    background: rgba(255,51,85,0.07); box-shadow: 0 0 12px rgba(255,51,85,0.2); }

  /* submit */
  .btn-submit {
    background: transparent;
    border: 1px solid var(--accent);
    color: var(--accent);
    font-family: 'Rajdhani', sans-serif;
    font-weight: 700;
    font-size: 1rem;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    padding: 0.85rem;
    border-radius: 3px;
    cursor: pointer;
    transition: all 0.2s;
    width: 100%;
    margin-top: 0.4rem;
    position: relative;
    overflow: hidden;
  }

  .btn-submit::before {
    content: '';
    position: absolute; inset: 0;
    background: var(--accent);
    transform: translateX(-100%);
    transition: transform 0.25s ease;
    z-index: -1;
  }

  .btn-submit:hover { color: var(--bg); }
  .btn-submit:hover::before { transform: translateX(0); }

  .btn-submit:disabled {
    opacity: 0.4; cursor: not-allowed;
  }
  .btn-submit:disabled::before { display: none; }
  .btn-submit:disabled:hover { color: var(--accent); }

  /* ‚îÄ‚îÄ RIGHT PANEL ‚îÄ‚îÄ */
  .right-col { display: flex; flex-direction: column; gap: 1.5rem; }

  /* ‚îÄ‚îÄ STATS ROW ‚îÄ‚îÄ */
  .stats-row {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 1rem;
  }

  .stat-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 4px;
    padding: 1rem 1.2rem;
    position: relative;
    overflow: hidden;
  }

  .stat-card::after {
    content: '';
    position: absolute; bottom: 0; left: 0; right: 0;
    height: 2px;
  }

  .stat-card.c1::after { background: var(--accent); }
  .stat-card.c2::after { background: var(--green); }
  .stat-card.c3::after { background: var(--warn); }
  .stat-card.c4::after { background: var(--accent2); }

  .stat-label {
    font-family: 'Share Tech Mono', monospace;
    font-size: 0.65rem;
    letter-spacing: 0.1em;
    color: var(--muted);
    text-transform: uppercase;
    margin-bottom: 6px;
  }

  .stat-value {
    font-family: 'Rajdhani', sans-serif;
    font-size: 2rem;
    font-weight: 700;
    color: #fff;
    line-height: 1;
  }

  /* ‚îÄ‚îÄ RESULTS PANEL ‚îÄ‚îÄ */
  .results-panel { flex: 1; }

  .results-body { padding: 1.4rem; }

  /* placeholder */
  .placeholder {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 14px;
    padding: 4rem 2rem;
    color: var(--muted);
    text-align: center;
  }

  .placeholder-icon {
    font-size: 3rem;
    opacity: 0.3;
  }

  .placeholder p {
    font-family: 'Share Tech Mono', monospace;
    font-size: 0.8rem;
    letter-spacing: 0.1em;
  }

  /* loading */
  .loading {
    display: none;
    flex-direction: column;
    align-items: center;
    gap: 16px;
    padding: 4rem;
  }

  .loading.active { display: flex; }

  .spinner {
    width: 48px; height: 48px;
    border: 2px solid var(--border);
    border-top-color: var(--accent);
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
  }

  @keyframes spin { to { transform: rotate(360deg); } }

  .loading p {
    font-family: 'Share Tech Mono', monospace;
    font-size: 0.75rem;
    color: var(--accent);
    letter-spacing: 0.1em;
    animation: typing 1.5s steps(20) infinite;
  }

  @keyframes typing {
    0%,100% { opacity: 1; }
    50%      { opacity: 0.4; }
  }

  /* results */
  .results-list {
    display: none;
    flex-direction: column;
    gap: 10px;
  }

  .results-list.active { display: flex; }

  .case-badge {
    display: inline-flex;
    align-items: center;
    gap: 16px;
    margin-bottom: 1rem;
    padding: 8px 14px;
    background: rgba(0,229,255,0.05);
    border: 1px solid rgba(0,229,255,0.15);
    border-radius: 3px;
    font-family: 'Share Tech Mono', monospace;
    font-size: 0.75rem;
    color: var(--accent);
  }

  .case-badge span { color: var(--muted); }

  .officer-card {
    background: var(--bg);
    border: 1px solid var(--border);
    border-radius: 3px;
    padding: 1rem 1.2rem;
    display: grid;
    grid-template-columns: 48px 1fr auto;
    gap: 1rem;
    align-items: center;
    transition: border-color 0.2s, transform 0.2s;
    animation: slideIn 0.4s ease both;
  }

  .officer-card:hover {
    border-color: rgba(0,229,255,0.3);
    transform: translateX(4px);
  }

  @keyframes slideIn {
    from { opacity: 0; transform: translateX(-16px); }
    to   { opacity: 1; transform: translateX(0); }
  }

  .officer-card:nth-child(2) { animation-delay: 0.05s; }
  .officer-card:nth-child(3) { animation-delay: 0.10s; }
  .officer-card:nth-child(4) { animation-delay: 0.15s; }
  .officer-card:nth-child(5) { animation-delay: 0.20s; }
  .officer-card:nth-child(6) { animation-delay: 0.25s; }

  .officer-rank {
    width: 48px; height: 48px;
    border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    font-family: 'Rajdhani', sans-serif;
    font-weight: 700;
    font-size: 1.2rem;
    flex-shrink: 0;
  }

  .rank-1 { background: rgba(255,204,0,0.12);  color: var(--warn);   border: 1px solid rgba(255,204,0,0.3); }
  .rank-2 { background: rgba(0,229,255,0.08);  color: var(--accent); border: 1px solid rgba(0,229,255,0.2); }
  .rank-3 { background: rgba(255,107,53,0.08); color: var(--accent2);border: 1px solid rgba(255,107,53,0.2); }
  .rank-4 { background: rgba(200,216,232,0.05);color: var(--muted);  border: 1px solid var(--border); }
  .rank-5 { background: rgba(200,216,232,0.05);color: var(--muted);  border: 1px solid var(--border); }

  .officer-info {}

  .officer-id {
    font-family: 'Rajdhani', sans-serif;
    font-size: 1.05rem;
    font-weight: 700;
    color: #fff;
    letter-spacing: 0.06em;
    margin-bottom: 4px;
  }

  .officer-meta {
    display: flex; gap: 14px; flex-wrap: wrap;
  }

  .meta-tag {
    font-family: 'Share Tech Mono', monospace;
    font-size: 0.68rem;
    color: var(--muted);
  }

  .meta-tag strong { color: var(--text); }

  .officer-score-wrap { text-align: right; }

  .score-label {
    font-family: 'Share Tech Mono', monospace;
    font-size: 0.62rem;
    color: var(--muted);
    letter-spacing: 0.1em;
    margin-bottom: 2px;
  }

  .score-value {
    font-family: 'Rajdhani', sans-serif;
    font-size: 1.6rem;
    font-weight: 700;
    line-height: 1;
  }

  .score-high   { color: var(--green); }
  .score-medium { color: var(--warn); }
  .score-low    { color: var(--accent2); }

  .score-bar-wrap {
    width: 60px;
    height: 3px;
    background: var(--border);
    border-radius: 2px;
    margin-top: 4px;
    margin-left: auto;
  }

  .score-bar {
    height: 100%;
    border-radius: 2px;
    transition: width 1s ease;
  }

  .score-high-bar   { background: var(--green); }
  .score-medium-bar { background: var(--warn); }
  .score-low-bar    { background: var(--accent2); }

  /* avail badge */
  .avail-badge {
    display: inline-block;
    padding: 2px 7px;
    border-radius: 2px;
    font-family: 'Share Tech Mono', monospace;
    font-size: 0.6rem;
    letter-spacing: 0.08em;
    margin-left: 8px;
  }

  .avail-yes { background: rgba(0,255,136,0.1); color: var(--green); border: 1px solid rgba(0,255,136,0.2); }
  .avail-no  { background: rgba(255,51,85,0.1);  color: var(--red);   border: 1px solid rgba(255,51,85,0.2); }

  /* ‚îÄ‚îÄ FOOTER ‚îÄ‚îÄ */
  footer {
    position: relative; z-index: 1;
    border-top: 1px solid var(--border);
    padding: 1rem 2rem;
    text-align: center;
  }

  footer p {
    font-family: 'Share Tech Mono', monospace;
    font-size: 0.68rem;
    color: var(--muted);
    letter-spacing: 0.08em;
  }

  footer span { color: var(--accent); }

  /* error */
  .error-msg {
    display: none;
    background: rgba(255,51,85,0.06);
    border: 1px solid rgba(255,51,85,0.2);
    border-radius: 3px;
    padding: 12px 16px;
    font-family: 'Share Tech Mono', monospace;
    font-size: 0.75rem;
    color: var(--red);
    letter-spacing: 0.06em;
  }

  .error-msg.active { display: block; }

  /* responsive */
  @media (max-width: 1000px) {
    .wrapper { grid-template-columns: 1fr; }
    .stats-row { grid-template-columns: repeat(2, 1fr); }
  }

  @media (max-width: 550px) {
    .stats-row { grid-template-columns: 1fr 1fr; }
    .officer-card { grid-template-columns: 40px 1fr; }
    .officer-score-wrap { display: none; }
  }
</style>
</head>
<body>

<!-- HEADER -->
<header>
  <div class="header-inner">
    <div class="logo">
      <div class="logo-icon">‚¨°</div>
      <div class="logo-text">POLICE <span>CASE</span> MATCHING</div>
    </div>
    <div class="status-bar">
      <div class="status-dot"><div class="dot"></div> SYSTEM ONLINE</div>
      <div class="status-dot" id="clock">00:00:00</div>
    </div>
  </div>
</header>

<!-- MAIN -->
<div class="wrapper">

  <!-- LEFT: INPUT FORM -->
  <div class="panel">
    <div class="panel-header">
      <span class="panel-icon">üìã</span>
      <h2>Case Input</h2>
    </div>
    <div class="form-body">

      <div class="field">
        <label>Case Type</label>
        <div class="select-wrap">
          <select id="caseType">
            <option value="">‚Äî Select Crime Type ‚Äî</option>
            <option value="Robbery">Robbery</option>
            <option value="Homicide">Homicide</option>
            <option value="Cybercrime">Cybercrime</option>
            <option value="Fraud">Fraud</option>
            <option value="Drug Dealing">Drug Dealing</option>
            <option value="Assault">Assault</option>
            <option value="Kidnapping">Kidnapping</option>
            <option value="Burglary">Burglary</option>
          </select>
        </div>
      </div>

      <div class="field">
        <label>Location</label>
        <div class="select-wrap">
          <select id="location">
            <option value="">‚Äî Select Location ‚Äî</option>
            <option value="North">North</option>
            <option value="South">South</option>
            <option value="East">East</option>
            <option value="West">West</option>
            <option value="Downtown">Downtown</option>
            <option value="Suburban">Suburban</option>
          </select>
        </div>
      </div>

      <div class="field">
        <label>Priority Level</label>
        <div class="priority-grid">
          <button class="priority-btn low"      data-val="Low"      onclick="setPriority(this)">Low</button>
          <button class="priority-btn medium"   data-val="Medium"   onclick="setPriority(this)">Medium</button>
          <button class="priority-btn high"     data-val="High"     onclick="setPriority(this)">High</button>
          <button class="priority-btn critical" data-val="Critical" onclick="setPriority(this)">‚ö† Critical</button>
        </div>
        <input type="hidden" id="priority" value=""/>
      </div>

      <div class="field">
        <label>Number of Officers to Recommend</label>
        <div class="select-wrap">
          <select id="topN">
            <option value="3">Top 3</option>
            <option value="5" selected>Top 5</option>
            <option value="10">Top 10</option>
          </select>
        </div>
      </div>

      <div class="error-msg" id="errorMsg">‚ö† Please fill in all fields before searching.</div>

      <button class="btn-submit" id="submitBtn" onclick="findOfficers()">
        ‚ñ∂ FIND BEST OFFICERS
      </button>

    </div>
  </div>

  <!-- RIGHT: STATS + RESULTS -->
  <div class="right-col">

    <!-- STATS -->
    <div class="stats-row">
      <div class="stat-card c1">
        <div class="stat-label">Total Officers</div>
        <div class="stat-value">100</div>
      </div>
      <div class="stat-card c2">
        <div class="stat-label">Available Now</div>
        <div class="stat-value" id="availCount">‚Äî</div>
      </div>
      <div class="stat-card c3">
        <div class="stat-label">Total Cases</div>
        <div class="stat-value">500</div>
      </div>
      <div class="stat-card c4">
        <div class="stat-label">Best Model</div>
        <div class="stat-value" style="font-size:1rem; padding-top:6px; color: var(--accent2);">LOG REG</div>
      </div>
    </div>

    <!-- RESULTS -->
    <div class="panel results-panel">
      <div class="panel-header">
        <span class="panel-icon">üèÜ</span>
        <h2>Recommended Officers</h2>
      </div>
      <div class="results-body">

        <div class="placeholder" id="placeholder">
          <div class="placeholder-icon">üëÆ</div>
          <p>AWAITING CASE INPUT</p>
          <p style="opacity:0.5; margin-top:4px;">Enter case details to find the best matching officers</p>
        </div>

        <div class="loading" id="loading">
          <div class="spinner"></div>
          <p>ANALYZING OFFICER PROFILES...</p>
        </div>

        <div class="results-list" id="resultsList"></div>

      </div>
    </div>

  </div>
</div>

<!-- FOOTER -->
<footer>
  <p>POLICE OFFICER-TO-CASE MATCHING ML SYSTEM &nbsp;|&nbsp; <span>IIT ‚Äî University of Dhaka</span> &nbsp;|&nbsp; Logistic Regression ¬∑ Random Forest ¬∑ Gradient Boosting</p>
</footer>

<script>
  // ‚îÄ‚îÄ CLOCK ‚îÄ‚îÄ
  function updateClock() {
    const now = new Date();
    document.getElementById('clock').textContent =
      now.toTimeString().slice(0,8);
  }
  setInterval(updateClock, 1000);
  updateClock();

  // ‚îÄ‚îÄ PRIORITY SELECTION ‚îÄ‚îÄ
  let selectedPriority = '';
  function setPriority(btn) {
    document.querySelectorAll('.priority-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    selectedPriority = btn.dataset.val;
    document.getElementById('priority').value = selectedPriority;
  }

  // ‚îÄ‚îÄ MOCK OFFICER DATA (simulates ML backend output) ‚îÄ‚îÄ
  const officerPool = [
    { id:'OFF0063', exp:29, rate:0.95, region:'North',    units:'Homicide|Gang Division|Narcotics',      available:true,  cases:3  },
    { id:'OFF0002', exp:26, rate:0.95, region:'South',    units:'General Patrol|Fraud Investigation',    available:true,  cases:10 },
    { id:'OFF0045', exp:22, rate:0.92, region:'Downtown', units:'Cyber|Homicide|Gang Division',          available:true,  cases:5  },
    { id:'OFF0081', exp:18, rate:0.89, region:'North',    units:'General Patrol|Narcotics',              available:true,  cases:7  },
    { id:'OFF0023', exp:15, rate:0.88, region:'South',    units:'Gang Division|Fraud Investigation',     available:true,  cases:12 },
    { id:'OFF0078', exp:20, rate:0.90, region:'Downtown', units:'Homicide|Cyber',                        available:false, cases:18 },
    { id:'OFF0031', exp:12, rate:0.85, region:'Suburban', units:'General Patrol|Gang Division',          available:true,  cases:4  },
    { id:'OFF0056', exp:14, rate:0.82, region:'West',     units:'Narcotics|Drug Division',               available:true,  cases:8  },
    { id:'OFF0019', exp:25, rate:0.91, region:'East',     units:'Homicide|Gang Division|Cyber',          available:true,  cases:6  },
    { id:'OFF0007', exp:17, rate:0.87, region:'North',    units:'General Patrol|Narcotics|Fraud',        available:false, cases:19 },
    { id:'OFF0034', exp:10, rate:0.79, region:'South',    units:'General Patrol',                        available:true,  cases:2  },
    { id:'OFF0092', exp:28, rate:0.93, region:'Downtown', units:'Homicide|Gang Division',                available:true,  cases:9  },
    { id:'OFF0011', exp:8,  rate:0.74, region:'Suburban', units:'General Patrol|Patrol',                 available:true,  cases:1  },
    { id:'OFF0067', exp:21, rate:0.88, region:'West',     units:'Fraud Investigation|Cyber',             available:true,  cases:11 },
    { id:'OFF0055', exp:16, rate:0.86, region:'East',     units:'Drug Division|Narcotics',               available:true,  cases:5  },
  ];

  // ‚îÄ‚îÄ PRIORITY ‚Üí COMPLEXITY ‚îÄ‚îÄ
  const priorityMap = { Low: 2, Medium: 5, High: 8, Critical: 10 };

  // ‚îÄ‚îÄ COMPATIBILITY SCORING ‚îÄ‚îÄ
  function scoreOfficer(officer, caseType, location, priority) {
    const complexity = priorityMap[priority] || 5;
    let score = 0;

    score += officer.exp * 1.8;
    score += officer.rate * 45;

    // location match
    if (officer.region.toLowerCase() === location.toLowerCase()) score += 22;

    // specialization match
    const unitLower = officer.units.toLowerCase();
    const typeLower = caseType.toLowerCase();
    if (unitLower.includes(typeLower) ||
        (typeLower === 'homicide'    && unitLower.includes('homicide')) ||
        (typeLower === 'robbery'     && (unitLower.includes('general') || unitLower.includes('gang'))) ||
        (typeLower === 'cybercrime'  && unitLower.includes('cyber')) ||
        (typeLower === 'fraud'       && unitLower.includes('fraud')) ||
        (typeLower === 'drug dealing'&& (unitLower.includes('narc') || unitLower.includes('drug'))) ||
        (typeLower === 'assault'     && unitLower.includes('general')) ||
        (typeLower === 'kidnapping'  && unitLower.includes('homicide')) ||
        (typeLower === 'burglary'    && unitLower.includes('general'))) {
      score += 20;
    }

    // availability
    if (officer.available) score += 14;

    // workload penalty
    score -= officer.cases * 1.5;

    // complexity bonus for experienced officers
    score += (officer.exp / 30) * complexity;

    return Math.min(Math.max(Math.round(score * 10) / 10, 0), 100);
  }

  // update available count
  const availableOfficers = officerPool.filter(o => o.available).length;
  document.getElementById('availCount').textContent = availableOfficers;

  // ‚îÄ‚îÄ FIND OFFICERS ‚îÄ‚îÄ
  function findOfficers() {
    const caseType = document.getElementById('caseType').value;
    const location = document.getElementById('location').value;
    const priority = selectedPriority;
    const topN     = parseInt(document.getElementById('topN').value);
    const errEl    = document.getElementById('errorMsg');

    if (!caseType || !location || !priority) {
      errEl.classList.add('active');
      return;
    }
    errEl.classList.remove('active');

    // show loading
    document.getElementById('placeholder').style.display = 'none';
    document.getElementById('resultsList').classList.remove('active');
    document.getElementById('loading').classList.add('active');

    // simulate ML processing delay
    setTimeout(() => {
      const scored = officerPool.map(o => ({
        ...o,
        score: scoreOfficer(o, caseType, location, priority)
      }));

      scored.sort((a, b) => b.score - a.score);
      const top = scored.slice(0, topN);

      renderResults(top, caseType, location, priority);

      document.getElementById('loading').classList.remove('active');
      document.getElementById('resultsList').classList.add('active');
    }, 1400);
  }

  function renderResults(officers, caseType, location, priority) {
    const list = document.getElementById('resultsList');
    const complexity = priorityMap[priority];

    const priorityColor = {
      Low: 'var(--green)', Medium: 'var(--warn)',
      High: 'var(--accent2)', Critical: 'var(--red)'
    }[priority];

    list.innerHTML = `
      <div class="case-badge">
        <span>CASE TYPE</span> ${caseType}
        &nbsp;&nbsp;<span>LOCATION</span> ${location}
        &nbsp;&nbsp;<span>PRIORITY</span> <span style="color:${priorityColor}">${priority}</span>
        &nbsp;&nbsp;<span>COMPLEXITY</span> ${complexity}/10
      </div>
    `;

    officers.forEach((officer, i) => {
      const scoreClass = officer.score >= 75 ? 'score-high' : officer.score >= 55 ? 'score-medium' : 'score-low';
      const barClass   = officer.score >= 75 ? 'score-high-bar' : officer.score >= 55 ? 'score-medium-bar' : 'score-low-bar';
      const availHtml  = officer.available
        ? '<span class="avail-badge avail-yes">AVAILABLE</span>'
        : '<span class="avail-badge avail-no">BUSY</span>';

      list.innerHTML += `
        <div class="officer-card">
          <div class="officer-rank rank-${i+1}">${i+1}</div>
          <div class="officer-info">
            <div class="officer-id">${officer.id} ${availHtml}</div>
            <div class="officer-meta">
              <div class="meta-tag">EXP <strong>${officer.exp} yrs</strong></div>
              <div class="meta-tag">SUCCESS <strong>${Math.round(officer.rate*100)}%</strong></div>
              <div class="meta-tag">REGION <strong>${officer.region}</strong></div>
              <div class="meta-tag">CASES <strong>${officer.cases} active</strong></div>
            </div>
          </div>
          <div class="officer-score-wrap">
            <div class="score-label">MATCH SCORE</div>
            <div class="score-value ${scoreClass}">${officer.score}</div>
            <div class="score-bar-wrap">
              <div class="score-bar ${barClass}" style="width:${officer.score}%"></div>
            </div>
          </div>
        </div>
      `;
    });
  }

  // allow Enter key
  document.addEventListener('keydown', e => {
    if (e.key === 'Enter') findOfficers();
  });
</script>

</body>
</html>
